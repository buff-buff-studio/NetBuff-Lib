
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../components/">
      
      
        <link rel="next" href="../scene_management/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.18">
    
    
      
        <title>Creating Custom Behaviours - NetBuff</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creating-custom-behaviours" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="NetBuff" class="md-header__button md-logo" aria-label="NetBuff" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NetBuff
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Creating Custom Behaviours
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="NetBuff" class="md-nav__button md-logo" aria-label="NetBuff" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    NetBuff
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Components
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Creating Custom Behaviours
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Creating Custom Behaviours
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#custom-serialization" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Serialization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Packets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Packets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sending-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Sending Packets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-reliability" class="md-nav__link">
    <span class="md-ellipsis">
      Packet Reliability
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receiving-owned-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Receiving Owned Packets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receiving-not-owned-any-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Receiving Not Owned / Any Packets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-callbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Network Callbacks
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../scene_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing Scenes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../object_spawning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spawning Objects
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reconnection_and_hot_reload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconnection and Hot-Reload
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom_network_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Network Manager
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../network_testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing the Network
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#custom-serialization" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Serialization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Packets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Packets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sending-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Sending Packets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-reliability" class="md-nav__link">
    <span class="md-ellipsis">
      Packet Reliability
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receiving-owned-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Receiving Owned Packets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receiving-not-owned-any-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Receiving Not Owned / Any Packets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-callbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Network Callbacks
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="creating-custom-behaviours">Creating Custom Behaviours</h1>
<p>In the following sections you can find help on how to implement you own NetworkBehaviours, overriding its network callbacks. The basic structure of a NetworkBehaviour is shown bellow:</p>
<div class="language-csharp highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CustomNetworkBehaviour</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">NetworkBehaviour</span>
</span><span id="__span-0-2"><span class="p">{</span>
</span><span id="__span-0-3"><span class="w">    </span><span class="c1">//My Fields</span>
</span><span id="__span-0-4"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">walkSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3f</span><span class="p">;</span>
</span><span id="__span-0-5">
</span><span id="__span-0-6"><span class="w">    </span><span class="c1">//My Network Values</span>
</span><span id="__span-0-7"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">IntNetworkValue</span><span class="w"> </span><span class="n">team</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IntNetworkValue</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
</span><span id="__span-0-8">
</span><span id="__span-0-9"><span class="w">    </span><span class="c1">//Unity callbacks</span>
</span><span id="__span-0-10"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnEnable</span><span class="p">(){}</span>
</span><span id="__span-0-11">
</span><span id="__span-0-12"><span class="w">    </span><span class="c1">//Network callbacks</span>
</span><span id="__span-0-13"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnSpawned</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">isRetroactive</span><span class="p">){}</span>
</span><span id="__span-0-14"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>There's no special rules, it works exactly like a normal MonoBehaviour, while providing network communication/syncing and the power to change the behaviour of a NetworkIdentity object</p>
<h2 id="custom-serialization">Custom Serialization</h2>
<p>If your class has a complex (or even variable data structure) that is too complex to be synced via NetworkValues you can use the custom serialization system. All you need to do is using the interface <b>INetworkBehaviourSerializer</b>:</p>
<div class="language-csharp highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CustomNetworkBehaviour</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">NetworkBehaviour</span><span class="p">,</span><span class="w"> </span><span class="n">INetworkBehaviourSerializer</span>
</span><span id="__span-1-2"><span class="p">{</span>
</span><span id="__span-1-3"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">valueTooComplex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">float</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</span><span id="__span-1-4">
</span><span id="__span-1-5"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnSerialize</span><span class="p">(</span><span class="n">BinaryWriter</span><span class="w"> </span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">forceSendAll</span><span class="p">)</span>
</span><span id="__span-1-6"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-1-7"><span class="w">        </span><span class="n">writer</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">valueTooComplex</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
</span><span id="__span-1-8"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">valueTooComplex</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-1-9"><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-10"><span class="w">            </span><span class="n">writer</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">valueTooComplex</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span><span id="__span-1-11"><span class="w">        </span><span class="p">}</span><span class="w">   </span>
</span><span id="__span-1-12"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-13">
</span><span id="__span-1-14"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnDeserialize</span><span class="p">(</span><span class="n">BinaryReader</span><span class="w"> </span><span class="n">reader</span><span class="p">)</span>
</span><span id="__span-1-15"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-1-16"><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reader</span><span class="p">.</span><span class="n">ReadInt32</span><span class="p">();</span>
</span><span id="__span-1-17"><span class="w">        </span><span class="n">valueTooComplex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">float</span><span class="p">[</span><span class="n">length</span><span class="p">];</span>
</span><span id="__span-1-18"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-1-19"><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-20"><span class="w">            </span><span class="n">valueTooComplex</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reader</span><span class="p">.</span><span class="n">ReadSingle</span><span class="p">();</span>
</span><span id="__span-1-21"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-1-22"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-23"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Doing this, all the data will be synced through the network (even for late-joiners). If your data is too complex you can implement a system to only update the needed data, but when forceSendAll is true you need to write all the data to the writer. This value will be true when a late joiner is requesting all NetworkIdentities data. You can use <b>NetworkIdentity.MarkSerializerDirty</b> to call the OnSerialize method, so the OnSerialize (with forceSendAll = false) will be called again and the data will be synced, so the other network peers will use OnDeserialize to read the data.</p>
<h2 id="custom-packets">Custom Packets</h2>
<p>The third method to create custom data transfer / syncing is using packets. Internally, all the three methods end up using Packets to send data through the network, but you can create your custom own packets. The packet system was chosen was the main transfer method of <b class="netbuff">NetBuff</b> as packets are super fast, easy-to-use and lightweight while comparated to other solutions.</p>
<p>To create a custom packet you need to create a new class that implements the IPacket or the IOwnedPacket interface:</p>
<div class="language-csharp highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">PlayerPunchActionPacket</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IPacket</span>
</span><span id="__span-2-2"><span class="p">{</span>
</span><span id="__span-2-3"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">NetworkId</span><span class="w"> </span><span class="n">Id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-4">
</span><span id="__span-2-5"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Serialize</span><span class="p">(</span><span class="n">BinaryWriter</span><span class="w"> </span><span class="n">writer</span><span class="p">)</span>
</span><span id="__span-2-6"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-7"><span class="w">        </span><span class="n">Id</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="n">writer</span><span class="p">);</span>
</span><span id="__span-2-8"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-9">
</span><span id="__span-2-10"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Deserialize</span><span class="p">(</span><span class="n">BinaryReader</span><span class="w"> </span><span class="n">reader</span><span class="p">)</span>
</span><span id="__span-2-11"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-12"><span class="w">        </span><span class="n">Id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NetworkId</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">reader</span><span class="p">);</span>
</span><span id="__span-2-13"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-14"><span class="p">}</span>
</span><span id="__span-2-15">
</span><span id="__span-2-16"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">PacketBodyRotation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IOwnedPacket</span>
</span><span id="__span-2-17"><span class="p">{</span>
</span><span id="__span-2-18"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">NetworkId</span><span class="w"> </span><span class="n">Id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-19"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">BodyRotation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-20">
</span><span id="__span-2-21"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Serialize</span><span class="p">(</span><span class="n">BinaryWriter</span><span class="w"> </span><span class="n">writer</span><span class="p">)</span>
</span><span id="__span-2-22"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-23"><span class="w">        </span><span class="n">Id</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="n">writer</span><span class="p">);</span>
</span><span id="__span-2-24"><span class="w">        </span><span class="n">writer</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">BodyRotation</span><span class="p">);</span>
</span><span id="__span-2-25"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-26">
</span><span id="__span-2-27"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Deserialize</span><span class="p">(</span><span class="n">BinaryReader</span><span class="w"> </span><span class="n">reader</span><span class="p">)</span>
</span><span id="__span-2-28"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-29"><span class="w">        </span><span class="n">Id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NetworkId</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">reader</span><span class="p">);</span>
</span><span id="__span-2-30"><span class="w">        </span><span class="n">BodyRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reader</span><span class="p">.</span><span class="n">ReadSingle</span><span class="p">();</span>
</span><span id="__span-2-31"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-32"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>A IOwnedPacket is a IPacket that is directly attached to a NetworkIdentity, so they will be sent internally by a NetworkBehaviour and the server will find the same NetworkBehaviour at the other network peers and call the receiving callback.</p>
<p>A normal IPacket is not directly attached to anything, so they will just sent through the network and all the handling must be done manually.</p>
<h3 id="sending-packets">Sending Packets</h3>
<p>To send a packet you can use the SendPacket method that will automatically use the correct method to send the packet:</p>
<div class="language-csharp highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><span class="kt">var</span><span class="w"> </span><span class="n">packet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PacketBodyRotation</span>
</span><span id="__span-3-2"><span class="p">{</span>
</span><span id="__span-3-3"><span class="w">    </span><span class="n">Id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Id</span><span class="p">,</span>
</span><span id="__span-3-4"><span class="w">    </span><span class="n">BodyRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">body</span><span class="p">.</span><span class="n">localEulerAngles</span><span class="p">.</span><span class="n">y</span>
</span><span id="__span-3-5"><span class="p">};</span>
</span><span id="__span-3-6"><span class="n">SendPacket</span><span class="p">(</span><span class="n">packet</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<p>Internally the SendPacket method uses the <b>NetworkBehaviour.ClientSendPacket</b> and <b>NetworkBehaviour.ServerBroadcastPacket</b> methods, so you can use them as well:</p>
<div class="language-csharp highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">IsOwnedByClient</span><span class="p">)</span>
</span><span id="__span-4-2"><span class="w">    </span><span class="n">ClientSendPacket</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span><span class="w"> </span><span class="n">reliable</span><span class="p">);</span><span class="w"> </span><span class="c1">//Client sends a message to the server</span>
</span><span id="__span-4-3"><span class="k">else</span>
</span><span id="__span-4-4"><span class="w">    </span><span class="nf">ServerBroadcastPacket</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span><span class="w"> </span><span class="n">reliable</span><span class="p">);</span><span class="w"> </span><span class="c1">//Server broadcast a message to all the clients</span>
</span></code></pre></div></td></tr></table></div>
<p>If you are on the server side you can use <b>NetworkBehaviour.ServerBroadcastPacketExceptFor</b> to broadcast a message to all the clients except one. This behaviour can be useful sometimes.</p>
<h3 id="packet-reliability">Packet Reliability</h3>
<p>When you use any of the packet sending methods you can set the argument of reliabity. When set to true the delivery method is reliable, supports larger packets with the cost of being a little slower. When the value is set to false there no realibity, packets are limited to small sizes but the delivery is blazing fast!</p>
<p>NetworkValue syncing and any other important/instant action are made using reliable delivery, as they need to be guaranteed to delivered. NetworkTransform in the other side don't use the reliability delivery, as their state is almost constantly updated, so losing some packets will probably not cause an issue.</p>
<p>The packet loss count can be seen using the NetworkManagerGUI. If the network connection quality is good you may not lose a single packet, but if you have network issues you may experience some packet loss. Choose wisely when the reliability is needed or not. Most of the time the reliable=true is the way to go.</p>
<table>
<thead>
<tr>
<th></th>
<th>Unreliable</th>
<th>Reliable</th>
</tr>
</thead>
<tbody>
<tr>
<td>Speed</td>
<td>Fast+</td>
<td>Fast</td>
</tr>
<tr>
<td>Max Size</td>
<td>Small</td>
<td>Large</td>
</tr>
<tr>
<td>Order</td>
<td>May be unordered</td>
<td>The order will be kept</td>
</tr>
<tr>
<td>Loss</td>
<td>May be lost</td>
<td>If lost they will be sent again</td>
</tr>
<tr>
<td>usage Example</td>
<td>NetworkTransform, high-freq update packets</td>
<td>Actions, NetworkValues, etc...</td>
</tr>
</tbody>
</table>
<h3 id="receiving-owned-packets">Receiving Owned Packets</h3>
<p>To receive IOwnedPackets we can use the <b>NetworkBehaviour.OnServerReceivePacket</b> and <b>NetworkBehaviour.OnClientReceivePacket</b> callbacks:</p>
<div class="language-csharp highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">PlayerController</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">NetworkBehaviour</span>
</span><span id="__span-5-2"><span class="p">{</span>
</span><span id="__span-5-3"><span class="w">    </span><span class="c1">//Server received the packet, check the ownership (optional) than broadcasts it to everyone else than the origin client</span>
</span><span id="__span-5-4"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnServerReceivePacket</span><span class="p">(</span><span class="n">IOwnedPacket</span><span class="w"> </span><span class="n">packet</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">clientId</span><span class="p">)</span>
</span><span id="__span-5-5"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-6"><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">packet</span><span class="p">)</span>
</span><span id="__span-5-7"><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-8"><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">PacketBodyRotation</span><span class="w"> </span><span class="n">data</span><span class="p">:</span>
</span><span id="__span-5-9"><span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="n">clientId</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">OwnerId</span><span class="p">)</span>
</span><span id="__span-5-10"><span class="w">                    </span><span class="n">ServerBroadcastPacketExceptFor</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">clientId</span><span class="p">);</span>
</span><span id="__span-5-11"><span class="w">                </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-5-12"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-13"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-14">
</span><span id="__span-5-15">
</span><span id="__span-5-16"><span class="w">    </span><span class="c1">//Client received the packet, then applied it to the transform itslf</span>
</span><span id="__span-5-17"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnClientReceivePacket</span><span class="p">(</span><span class="n">IOwnedPacket</span><span class="w"> </span><span class="n">packet</span><span class="p">)</span>
</span><span id="__span-5-18"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-19"><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">packet</span><span class="p">)</span>
</span><span id="__span-5-20"><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-21"><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">PacketBodyRotation</span><span class="w"> </span><span class="n">bodyRot</span><span class="p">:</span>
</span><span id="__span-5-22"><span class="w">                </span><span class="n">transform</span><span class="p">.</span><span class="n">eulerAngles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">bodyRot</span><span class="p">.</span><span class="n">BodyRotation</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span>
</span><span id="__span-5-23"><span class="w">                </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-5-24"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-25"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-26"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Only the object with the IOwnedPacket id will receive the callbacks, so you don't need to worry checking the id manually!</p>
<h3 id="receiving-not-owned-any-packets">Receiving Not Owned / Any Packets</h3>
<p>If a packet is not owned you can register a custom listener for it anywhere in the project. In the example bellow the Lever class is listening for PlayerPunchActionPacket, which is a packet that is sent by the PlayerController class:</p>
<div class="language-csharp highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Lever</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">NetworkBehaviour</span>
</span><span id="__span-6-2"><span class="p">{</span>
</span><span id="__span-6-3"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">BoolNetworkValue</span><span class="w"> </span><span class="n">isOn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</span><span id="__span-6-4"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2f</span><span class="p">;</span>
</span><span id="__span-6-5">
</span><span id="__span-6-6"><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnEnable</span><span class="p">()</span>
</span><span id="__span-6-7"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-6-8"><span class="w">        </span><span class="n">WithValues</span><span class="p">(</span><span class="n">isOn</span><span class="p">);</span>
</span><span id="__span-6-9"><span class="w">        </span><span class="n">GetPacketListener</span><span class="o">&lt;</span><span class="n">PlayerPunchActionPacket</span><span class="o">&gt;</span><span class="p">().</span><span class="n">OnServerReceive</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">OnPlayerPunch</span><span class="p">;</span>
</span><span id="__span-6-10"><span class="w">        </span><span class="c1">//GetPacketListener&lt;PlayerPunchActionPacket&gt;().OnClientReceive ...;</span>
</span><span id="__span-6-11"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-12">
</span><span id="__span-6-13"><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnDisable</span><span class="p">()</span>
</span><span id="__span-6-14"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-6-15"><span class="w">        </span><span class="n">GetPacketListener</span><span class="o">&lt;</span><span class="n">PlayerPunchActionPacket</span><span class="o">&gt;</span><span class="p">().</span><span class="n">OnServerReceive</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">OnPlayerPunch</span><span class="p">;</span>
</span><span id="__span-6-16"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-17">
</span><span id="__span-6-18"><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnPlayerPunch</span><span class="p">(</span><span class="n">PlayerPunchActionPacket</span><span class="w"> </span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
</span><span id="__span-6-19"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-6-20"><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetNetworkObject</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>
</span><span id="__span-6-21"><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector3</span><span class="p">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
</span><span id="__span-6-22">
</span><span id="__span-6-23"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">dist</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">radius</span><span class="p">)</span>
</span><span id="__span-6-24"><span class="w">            </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-6-25">
</span><span id="__span-6-26"><span class="w">        </span><span class="n">isOn</span><span class="p">.</span><span class="n">Value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">isOn</span><span class="p">.</span><span class="n">Value</span><span class="p">;</span>
</span><span id="__span-6-27"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-28"><span class="p">}</span>
</span><span id="__span-6-29">
</span><span id="__span-6-30"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">PlayerController</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">NetworkBehaviour</span>
</span><span id="__span-6-31"><span class="p">{</span>
</span><span id="__span-6-32"><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Update</span><span class="p">()</span>
</span><span id="__span-6-33"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-6-34"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">HasAuthority</span><span class="p">)</span>
</span><span id="__span-6-35"><span class="w">            </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-6-36">
</span><span id="__span-6-37"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetKeyDown</span><span class="p">(</span><span class="n">KeyCode</span><span class="p">.</span><span class="n">Q</span><span class="p">))</span>
</span><span id="__span-6-38"><span class="w">        </span><span class="p">{</span>
</span><span id="__span-6-39"><span class="w">            </span><span class="n">SendPacket</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">PlayerPunchActionPacket</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Id</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
</span><span id="__span-6-40"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-41"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-42"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>You can use the <b>NetworkBehaviour.GetPacketListener</b> to listen to IOwnedPackets as well.</p>
<h2 id="network-callbacks">Network Callbacks</h2>
<p>In the table bellow you can find a list of all the NetworkBehaviour class callbacks:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>OnServerReceivePacket</td>
<td>IOwnedPacket packet int clientId</td>
<td>Called when the server side object receives an IOwnedPacket (Called on host as well)</td>
</tr>
<tr>
<td>OnClientReceivePacket</td>
<td>IOwnedPacket packet</td>
<td>Called when the client side object receives and IOwnedPacket (Called on host as well)</td>
</tr>
<tr>
<td>OnSpawned</td>
<td>bool isRetroactive</td>
<td>Called in the first frame that a NetworkIdentity object exists into the network. isRetroactive will be true for late-joiners syncing purposes</td>
</tr>
<tr>
<td>OnSceneChanged</td>
<td>int fromScene int toScene</td>
<td>Called when the object is moved from one scene to another</td>
</tr>
<tr>
<td>OnClientConnected</td>
<td>int clientId</td>
<td>Called when a client connect to the server (Called only on server)</td>
</tr>
<tr>
<td>OnClientDisconnected</td>
<td>int clientId</td>
<td>Called when a client disconnect from the server (Called only on server)</td>
</tr>
<tr>
<td>OnDespawned</td>
<td></td>
<td>Called when a NetworkIdentiy object is despawned</td>
</tr>
<tr>
<td>OnActiveChanged</td>
<td>bool active</td>
<td>Called when the activeness of a NetworkIdentity object changes</td>
</tr>
<tr>
<td>OnOwnershipChanged</td>
<td>int oldOwner int newOwner</td>
<td>Called when the ownership of a NetworkIdentity object changes</td>
</tr>
</tbody>
</table>
<p>You can use any Unity callback normally as a NetworkBehaviour is also a MonoBehaviour.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.select", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.3220b9d7.min.js"></script>
      
    
  </body>
</html>